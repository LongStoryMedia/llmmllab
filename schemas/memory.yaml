$schema: http://json-schema.org/draft-07/schema#
title: Memory
description: Memory represents a grouped memory for a user, which can be a summary or a question-answer pair
type: object
properties:
  fragments:
    type: array
    items:
      $ref: "#/definitions/MemoryFragment"
    description: Fragments of memory content
  source:
    type: string
    enum:
      - summary
      - message
    description: Source type of the memory
  created_at:
    type: string
    format: date-time
    description: Timestamp of when the memory was created
  similarity:
    type: number
    description: Similarity score from vector search
  source_id:
    type: integer
    description: Id of the source document or conversation
  conversation_id:
    type: integer
    description: Id of the conversation this memory belongs to
required:
  - fragments
  - source
  - created_at
  - similarity
  - source_id
definitions:
  MemoryFragment:
    type: object
    properties:
      id:
        type: integer
        description: Unique identifier for the memory fragment
      role:
        type: string
        description: Role of the message (e.g., 'user', 'assistant')
      content:
        type: string
        description: Content of the message
    required:
      - id
      - role
      - content
